{"ast":null,"code":"import axios from 'axios';\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n// Request interceptor for logging\napiClient.interceptors.request.use(config => {\n  var _config$method;\n  console.log(`ðŸš€ Making API request to: ${(_config$method = config.method) === null || _config$method === void 0 ? void 0 : _config$method.toUpperCase()} ${config.url}`);\n  return config;\n}, error => {\n  console.error('âŒ API request error:', error);\n  return Promise.reject(error);\n});\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(response => {\n  console.log(`âœ… API response received from: ${response.config.url}`, response.data);\n  return response;\n}, error => {\n  var _error$response, _error$response2, _error$response3, _error$response3$data;\n  console.error('âŒ API response error:', error);\n  if (error.code === 'ECONNREFUSED' || error.code === 'ERR_NETWORK') {\n    throw new Error('Unable to connect to MathViz server. Please ensure the backend is running.');\n  }\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 404) {\n    throw new Error('API endpoint not found. Please check the server configuration.');\n  }\n  if (((_error$response2 = error.response) === null || _error$response2 === void 0 ? void 0 : _error$response2.status) >= 500) {\n    throw new Error('Server error occurred. Please try again later.');\n  }\n  if ((_error$response3 = error.response) !== null && _error$response3 !== void 0 && (_error$response3$data = _error$response3.data) !== null && _error$response3$data !== void 0 && _error$response3$data.error) {\n    throw new Error(error.response.data.error);\n  }\n  throw new Error(error.message || 'An unexpected error occurred');\n});\nexport const mathvizAPI = {\n  /**\n   * Solve a mathematical problem\n   */\n  async solveProblem(problemText) {\n    try {\n      const response = await apiClient.post('/solve', {\n        problem: problemText.trim()\n      });\n      return {\n        success: true,\n        solution: response.data.solution,\n        desmos_url: response.data.desmos_url\n      };\n    } catch (error) {\n      console.error('Error solving problem:', error);\n      throw error;\n    }\n  },\n  /**\n   * Get solution with visualization\n   */\n  async solveProblemWithVisualization(problemText) {\n    try {\n      var _response$data$intera;\n      const response = await apiClient.post('/solve-with-graph', {\n        problem: problemText.trim(),\n        include_visualization: true\n      });\n      return {\n        success: true,\n        solution: response.data.solution,\n        desmos_url: ((_response$data$intera = response.data.interactive_graph) === null || _response$data$intera === void 0 ? void 0 : _response$data$intera.graph_url) || response.data.desmos_url\n      };\n    } catch (error) {\n      console.error('Error solving problem with visualization:', error);\n      throw error;\n    }\n  },\n  /**\n   * Health check endpoint\n   */\n  async healthCheck() {\n    try {\n      const response = await apiClient.get('/health');\n      return response.data;\n    } catch (error) {\n      console.error('Health check failed:', error);\n      throw error;\n    }\n  },\n  /**\n   * Get available problem types\n   */\n  async getProblemTypes() {\n    try {\n      const response = await apiClient.get('/problem-types');\n      return response.data.types || ['algebraic', 'calculus', 'optimization', 'general'];\n    } catch (error) {\n      console.error('Error fetching problem types:', error);\n      // Return default types if endpoint fails\n      return ['algebraic', 'calculus', 'optimization', 'general'];\n    }\n  },\n  /**\n   * Test the connection with a simple problem\n   */\n  async testConnection() {\n    try {\n      const response = await this.solveProblem('2 + 2');\n      return response.success;\n    } catch (error) {\n      console.error('Connection test failed:', error);\n      return false;\n    }\n  }\n};\nexport default mathvizAPI;","map":{"version":3,"names":["axios","API_BASE_URL","process","env","REACT_APP_API_URL","apiClient","create","baseURL","timeout","headers","interceptors","request","use","config","_config$method","console","log","method","toUpperCase","url","error","Promise","reject","response","data","_error$response","_error$response2","_error$response3","_error$response3$data","code","Error","status","message","mathvizAPI","solveProblem","problemText","post","problem","trim","success","solution","desmos_url","solveProblemWithVisualization","_response$data$intera","include_visualization","interactive_graph","graph_url","healthCheck","get","getProblemTypes","types","testConnection"],"sources":["/Users/sorour/workspace/Logikos/mathviz-frontend/src/services/api.ts"],"sourcesContent":["import axios from 'axios';\nimport { APIResponse } from '../types/mathviz';\n\nconst API_BASE_URL = process.env.REACT_APP_API_URL || 'http://localhost:8000';\n\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n});\n\n// Request interceptor for logging\napiClient.interceptors.request.use(\n  (config) => {\n    console.log(`ðŸš€ Making API request to: ${config.method?.toUpperCase()} ${config.url}`);\n    return config;\n  },\n  (error) => {\n    console.error('âŒ API request error:', error);\n    return Promise.reject(error);\n  }\n);\n\n// Response interceptor for error handling\napiClient.interceptors.response.use(\n  (response) => {\n    console.log(`âœ… API response received from: ${response.config.url}`, response.data);\n    return response;\n  },\n  (error) => {\n    console.error('âŒ API response error:', error);\n    \n    if (error.code === 'ECONNREFUSED' || error.code === 'ERR_NETWORK') {\n      throw new Error('Unable to connect to MathViz server. Please ensure the backend is running.');\n    }\n    \n    if (error.response?.status === 404) {\n      throw new Error('API endpoint not found. Please check the server configuration.');\n    }\n    \n    if (error.response?.status >= 500) {\n      throw new Error('Server error occurred. Please try again later.');\n    }\n    \n    if (error.response?.data?.error) {\n      throw new Error(error.response.data.error);\n    }\n    \n    throw new Error(error.message || 'An unexpected error occurred');\n  }\n);\n\nexport const mathvizAPI = {\n  /**\n   * Solve a mathematical problem\n   */\n  async solveProblem(problemText: string): Promise<APIResponse> {\n    try {\n      const response = await apiClient.post('/solve', {\n        problem: problemText.trim(),\n      });\n\n      return {\n        success: true,\n        solution: response.data.solution,\n        desmos_url: response.data.desmos_url,\n      };\n    } catch (error) {\n      console.error('Error solving problem:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * Get solution with visualization\n   */\n  async solveProblemWithVisualization(problemText: string): Promise<APIResponse> {\n    try {\n      const response = await apiClient.post('/solve-with-graph', {\n        problem: problemText.trim(),\n        include_visualization: true,\n      });\n\n      return {\n        success: true,\n        solution: response.data.solution,\n        desmos_url: response.data.interactive_graph?.graph_url || response.data.desmos_url,\n      };\n    } catch (error) {\n      console.error('Error solving problem with visualization:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * Health check endpoint\n   */\n  async healthCheck(): Promise<{ status: string; timestamp: string }> {\n    try {\n      const response = await apiClient.get('/health');\n      return response.data;\n    } catch (error) {\n      console.error('Health check failed:', error);\n      throw error;\n    }\n  },\n\n  /**\n   * Get available problem types\n   */\n  async getProblemTypes(): Promise<string[]> {\n    try {\n      const response = await apiClient.get('/problem-types');\n      return response.data.types || ['algebraic', 'calculus', 'optimization', 'general'];\n    } catch (error) {\n      console.error('Error fetching problem types:', error);\n      // Return default types if endpoint fails\n      return ['algebraic', 'calculus', 'optimization', 'general'];\n    }\n  },\n\n  /**\n   * Test the connection with a simple problem\n   */\n  async testConnection(): Promise<boolean> {\n    try {\n      const response = await this.solveProblem('2 + 2');\n      return response.success;\n    } catch (error) {\n      console.error('Connection test failed:', error);\n      return false;\n    }\n  }\n};\n\nexport default mathvizAPI;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}