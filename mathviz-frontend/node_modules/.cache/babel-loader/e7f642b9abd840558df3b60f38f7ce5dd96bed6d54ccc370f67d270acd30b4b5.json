{"ast":null,"code":"var _jsxFileName = \"/Users/sorour/Documents/GitHub/library-management-system (1)/Logikos/mathviz-frontend/src/components/SolutionDisplay.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport \"katex/dist/katex.min.css\";\nimport { InlineMath, BlockMath } from \"react-katex\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SolutionContainer = styled(motion.div)`\n  background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.90));\n  border-radius: 16px;\n  padding: 1.5rem;\n  margin: 1rem 0;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 8px 32px rgba(3, 8, 20, 0.3);\n  backdrop-filter: blur(10px);\n`;\n_c = SolutionContainer;\nconst FinalAnswer = styled(motion.div)`\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  padding: 1rem 1.5rem;\n  border-radius: 12px;\n  margin-bottom: 1.5rem;\n  font-weight: 600;\n  font-size: 1.1rem;\n  box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);\n  display: flex;\n  align-items: center;\n\n  &::before {\n    content: \"\";\n  }\n`;\n_c2 = FinalAnswer;\nconst StepsHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 8px;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.02);\n  }\n`;\n_c3 = StepsHeader;\nconst StepsTitle = styled.h3`\n  font-weight: 700;\n  font-size: 1rem;\n  color: #1f2937;\n  margin: 0;\n  display: flex;\n  align-items: center;\n`;\n_c4 = StepsTitle;\nconst ExpandButton = styled(motion.button)`\n  background: none;\n  border: none;\n  color: #6366f1;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n\n  &::after {\n    content: \"${props => props.isExpanded ? \"â–²\" : \"â–¼\"}\";\n    transition: transform 0.2s ease;\n  }\n`;\n_c5 = ExpandButton;\nconst StepsContainer = styled(motion.div)`\n  overflow: hidden;\n`;\n_c6 = StepsContainer;\nconst StepCard = styled(motion.div)`\n  background: white;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n  padding: 1rem;\n  margin-bottom: 0.75rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n  transition: all 0.2s ease;\n\n  &:hover {\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n    transform: translateY(-1px);\n  }\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n_c7 = StepCard;\nconst StepTitle = styled.div`\n  font-weight: 600;\n  color: #1f2937;\n  font-size: 0.95rem;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n\n  &::before {\n    content: counter(step-counter);\n    counter-increment: step-counter;\n    background: #6366f1;\n    color: white;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.8rem;\n    font-weight: 600;\n    margin-right: 0.75rem;\n    flex-shrink: 0;\n  }\n`;\n_c8 = StepTitle;\nconst RuleFormula = styled.div`\n  background: #eff6ff;\n  color: #1e40af;\n  padding: 0.5rem 0.75rem;\n  border-radius: 8px;\n  font-size: 0.85rem;\n  font-family: \"JetBrains Mono\", monospace;\n  margin: 0.5rem 0;\n  border-left: 3px solid #3b82f6;\n`;\n_c9 = RuleFormula;\nconst MathTransformation = styled.div`\n  background: #f3f4f6;\n  padding: 0.75rem;\n  border-radius: 10px;\n  font-family: \"JetBrains Mono\", monospace;\n  font-size: 0.9rem;\n  margin: 0.5rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n`;\n_c0 = MathTransformation;\nconst MathExpression = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 0.5rem;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n`;\n_c1 = MathExpression;\nconst Arrow = styled.div`\n  color: #6366f1;\n  font-weight: bold;\n  font-size: 1.2rem;\n`;\n_c10 = Arrow;\nconst StepExplanation = styled.div`\n  color: #6b7280;\n  font-size: 0.85rem;\n  line-height: 1.4;\n  font-style: italic;\n  margin-top: 0.5rem;\n  padding: 0.5rem;\n  background: rgba(107, 114, 128, 0.05);\n  border-radius: 6px;\n`;\n_c11 = StepExplanation;\nconst StepCounter = styled.div`\n  counter-reset: step-counter;\n`;\n_c12 = StepCounter;\nconst isLegacyStep = step => {\n  return \"step_id\" in step && \"description\" in step;\n};\nconst formatMathExpression = expr => {\n  if (!expr) return \"\";\n\n  // Convert common math notation to LaTeX\n  return expr.replace(/\\^(\\d+)/g, \"^{$1}\").replace(/\\^([a-zA-Z]+)/g, \"^{$1}\").replace(/sqrt\\(([^)]+)\\)/g, \"\\\\sqrt{$1}\").replace(/\\bpi\\b/g, \"\\\\pi\").replace(/\\binfinity\\b/g, \"\\\\infty\").replace(/\\*/g, \"\\\\cdot\").replace(/\\+-/g, \"\\\\pm\");\n};\nconst SafeMath = ({\n  children,\n  block = false\n}) => {\n  try {\n    const formatted = formatMathExpression(children);\n    return block ? /*#__PURE__*/_jsxDEV(BlockMath, {\n      children: formatted\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(InlineMath, {\n      children: formatted\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 7\n    }, this);\n  } catch (error) {\n    // Fallback to plain text if LaTeX parsing fails\n    return /*#__PURE__*/_jsxDEV(\"code\", {\n      style: {\n        fontFamily: \"JetBrains Mono, monospace\"\n      },\n      children: children\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 7\n    }, this);\n  }\n};\n_c13 = SafeMath;\nexport const SolutionDisplay = ({\n  solution\n}) => {\n  _s();\n  const [isExpanded, setIsExpanded] = useState(true);\n  const formatFinalAnswer = answer => {\n    if (typeof answer === \"object\" && answer !== null) {\n      if (answer.solutions) {\n        return `x = ${JSON.stringify(answer.solutions)}`;\n      } else if (answer.derivative) {\n        return `f'(x) = ${answer.derivative}`;\n      } else if (answer.integral) {\n        return `âˆ«f(x)dx = ${answer.integral} + C`;\n      } else if (answer.type === \"derivative\") {\n        return `f'(x) = ${answer.derivative || \"N/A\"}`;\n      } else if (answer.type === \"algebraic_solution\" && answer.solutions) {\n        const solutions = answer.solutions;\n        return Object.entries(solutions).map(([k, v]) => `${k} = ${v}`).join(\", \");\n      }\n      return JSON.stringify(answer);\n    }\n    return String(answer);\n  };\n\n  // Render HTML visualization if present (e.g., contour map, plotly, gnuplot)\n  const renderVisualization = () => {\n    // First check for direct visualization HTML (contour maps, etc.)\n    if (solution.visualization && typeof solution.visualization === \"string\" && solution.visualization.includes(\"<\")) {\n      console.log(\"ðŸŽ¨ Rendering direct visualization HTML\");\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: \"2rem 0\",\n          textAlign: \"center\",\n          maxWidth: \"100%\",\n          overflow: \"auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: solution.visualization\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 260,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 259,\n        columnNumber: 9\n      }, this);\n    }\n\n    // Check for graph_html in metadata from mathviz pipeline\n    const meta = solution.metadata;\n    if (meta && meta.graph_html && typeof meta.graph_html === \"string\") {\n      console.log(\"ðŸŽ¨ Rendering graph_html from metadata\");\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          margin: \"2rem 0\",\n          textAlign: \"center\",\n          maxWidth: \"100%\",\n          overflow: \"auto\"\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          dangerouslySetInnerHTML: {\n            __html: meta.graph_html\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this);\n    }\n\n    // Legacy support for interactive_visualization structure\n    if (meta && meta.interactive_visualization && meta.interactive_visualization.has_html) {\n      const html = meta.interactive_visualization.graph_html;\n      if (html) {\n        console.log(\"ðŸŽ¨ Rendering legacy interactive_visualization HTML\");\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            margin: \"2rem 0\",\n            textAlign: \"center\",\n            maxWidth: \"100%\",\n            overflow: \"auto\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            dangerouslySetInnerHTML: {\n              __html: html\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 11\n        }, this);\n      }\n    }\n    return null;\n  };\n  const renderStep = (step, index) => {\n    if (isLegacyStep(step)) {\n      var _step$input_state, _step$output_state;\n      // Handle new detailed format\n      const operation = step.operation.replace(/_/g, \" \").replace(/\\b\\w/g, l => l.toUpperCase());\n      const description = step.reasoning || step.description;\n      const ruleFormula = step.rule_formula;\n      const beforeExpr = ((_step$input_state = step.input_state) === null || _step$input_state === void 0 ? void 0 : _step$input_state.expression) || \"\";\n      const afterExpr = ((_step$output_state = step.output_state) === null || _step$output_state === void 0 ? void 0 : _step$output_state.expression) || \"\";\n      return /*#__PURE__*/_jsxDEV(StepCard, {\n        initial: {\n          opacity: 0,\n          y: 10\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          delay: index * 0.1\n        },\n        children: [/*#__PURE__*/_jsxDEV(StepTitle, {\n          children: operation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 11\n        }, this), ruleFormula && /*#__PURE__*/_jsxDEV(RuleFormula, {\n          children: /*#__PURE__*/_jsxDEV(SafeMath, {\n            children: ruleFormula\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 319,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 13\n        }, this), beforeExpr && afterExpr && beforeExpr !== afterExpr && /*#__PURE__*/_jsxDEV(MathTransformation, {\n          children: [/*#__PURE__*/_jsxDEV(MathExpression, {\n            children: /*#__PURE__*/_jsxDEV(SafeMath, {\n              children: beforeExpr\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 326,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Arrow, {\n            children: \"\\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 328,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MathExpression, {\n            children: /*#__PURE__*/_jsxDEV(SafeMath, {\n              children: afterExpr\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 330,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(StepExplanation, {\n          children: description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 11\n        }, this)]\n      }, step.step_id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 309,\n        columnNumber: 9\n      }, this);\n    } else {\n      // Handle legacy format\n      return /*#__PURE__*/_jsxDEV(StepCard, {\n        initial: {\n          opacity: 0,\n          y: 10\n        },\n        animate: {\n          opacity: 1,\n          y: 0\n        },\n        transition: {\n          delay: index * 0.1\n        },\n        children: [/*#__PURE__*/_jsxDEV(StepTitle, {\n          children: step.rule_name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 11\n        }, this), step.rule_formula && /*#__PURE__*/_jsxDEV(RuleFormula, {\n          children: /*#__PURE__*/_jsxDEV(SafeMath, {\n            children: step.rule_formula\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 13\n        }, this), step.before_expression && step.after_expression && /*#__PURE__*/_jsxDEV(MathTransformation, {\n          children: [/*#__PURE__*/_jsxDEV(MathExpression, {\n            children: step.latex_before ? /*#__PURE__*/_jsxDEV(SafeMath, {\n              children: step.latex_before\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(SafeMath, {\n              children: step.before_expression\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 361,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 357,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Arrow, {\n            children: \"\\u2192\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 364,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(MathExpression, {\n            children: step.latex_after ? /*#__PURE__*/_jsxDEV(SafeMath, {\n              children: step.latex_after\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 19\n            }, this) : /*#__PURE__*/_jsxDEV(SafeMath, {\n              children: step.after_expression\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(StepExplanation, {\n          children: step.explanation\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 375,\n          columnNumber: 11\n        }, this)]\n      }, index, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 9\n      }, this);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(SolutionContainer, {\n    initial: {\n      opacity: 0,\n      scale: 0.95\n    },\n    animate: {\n      opacity: 1,\n      scale: 1\n    },\n    transition: {\n      type: \"spring\",\n      stiffness: 300,\n      damping: 30\n    },\n    children: [solution.final_answer && /*#__PURE__*/_jsxDEV(FinalAnswer, {\n      initial: {\n        opacity: 0,\n        x: -20\n      },\n      animate: {\n        opacity: 1,\n        x: 0\n      },\n      transition: {\n        delay: 0.2\n      },\n      children: /*#__PURE__*/_jsxDEV(SafeMath, {\n        children: formatFinalAnswer(solution.final_answer)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 393,\n      columnNumber: 9\n    }, this), renderVisualization(), (solution.solution_steps || solution.steps) && (solution.solution_steps || solution.steps).length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(StepsHeader, {\n        onClick: () => setIsExpanded(!isExpanded),\n        children: [/*#__PURE__*/_jsxDEV(StepsTitle, {\n          children: [\"Step-by-Step Solution (\", (solution.solution_steps || solution.steps).length, \" \", \"steps)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 410,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(ExpandButton, {\n          isExpanded: isExpanded,\n          whileHover: {\n            scale: 1.05\n          },\n          whileTap: {\n            scale: 0.95\n          },\n          children: isExpanded ? \"Hide steps\" : \"Show steps\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 415,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 409,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(AnimatePresence, {\n        children: isExpanded && /*#__PURE__*/_jsxDEV(StepsContainer, {\n          initial: {\n            opacity: 0,\n            height: 0\n          },\n          animate: {\n            opacity: 1,\n            height: \"auto\"\n          },\n          exit: {\n            opacity: 0,\n            height: 0\n          },\n          transition: {\n            duration: 0.3\n          },\n          children: /*#__PURE__*/_jsxDEV(StepCounter, {\n            children: [(solution.solution_steps || solution.steps).slice(0, 10).map((step, index) => renderStep(step, index)), (solution.solution_steps || solution.steps).length > 10 && /*#__PURE__*/_jsxDEV(\"div\", {\n              style: {\n                textAlign: \"center\",\n                color: \"#6b7280\",\n                fontSize: \"0.85rem\",\n                marginTop: \"1rem\",\n                fontStyle: \"italic\"\n              },\n              children: [\"+\", \" \", (solution.solution_steps || solution.steps).length - 10, \" \", \"more steps available\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 441,\n              columnNumber: 23\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 432,\n            columnNumber: 19\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 426,\n          columnNumber: 17\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 424,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 408,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 382,\n    columnNumber: 5\n  }, this);\n};\n_s(SolutionDisplay, \"MzqrZ0LJxgqPa6EOF1Vxw0pgYA4=\");\n_c14 = SolutionDisplay;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14;\n$RefreshReg$(_c, \"SolutionContainer\");\n$RefreshReg$(_c2, \"FinalAnswer\");\n$RefreshReg$(_c3, \"StepsHeader\");\n$RefreshReg$(_c4, \"StepsTitle\");\n$RefreshReg$(_c5, \"ExpandButton\");\n$RefreshReg$(_c6, \"StepsContainer\");\n$RefreshReg$(_c7, \"StepCard\");\n$RefreshReg$(_c8, \"StepTitle\");\n$RefreshReg$(_c9, \"RuleFormula\");\n$RefreshReg$(_c0, \"MathTransformation\");\n$RefreshReg$(_c1, \"MathExpression\");\n$RefreshReg$(_c10, \"Arrow\");\n$RefreshReg$(_c11, \"StepExplanation\");\n$RefreshReg$(_c12, \"StepCounter\");\n$RefreshReg$(_c13, \"SafeMath\");\n$RefreshReg$(_c14, \"SolutionDisplay\");","map":{"version":3,"names":["React","useState","styled","motion","AnimatePresence","InlineMath","BlockMath","jsxDEV","_jsxDEV","SolutionContainer","div","_c","FinalAnswer","_c2","StepsHeader","_c3","StepsTitle","h3","_c4","ExpandButton","button","props","isExpanded","_c5","StepsContainer","_c6","StepCard","_c7","StepTitle","_c8","RuleFormula","_c9","MathTransformation","_c0","MathExpression","_c1","Arrow","_c10","StepExplanation","_c11","StepCounter","_c12","isLegacyStep","step","formatMathExpression","expr","replace","SafeMath","children","block","formatted","fileName","_jsxFileName","lineNumber","columnNumber","error","style","fontFamily","_c13","SolutionDisplay","solution","_s","setIsExpanded","formatFinalAnswer","answer","solutions","JSON","stringify","derivative","integral","type","Object","entries","map","k","v","join","String","renderVisualization","visualization","includes","console","log","margin","textAlign","maxWidth","overflow","dangerouslySetInnerHTML","__html","meta","metadata","graph_html","interactive_visualization","has_html","html","renderStep","index","_step$input_state","_step$output_state","operation","l","toUpperCase","description","reasoning","ruleFormula","rule_formula","beforeExpr","input_state","expression","afterExpr","output_state","initial","opacity","y","animate","transition","delay","step_id","rule_name","before_expression","after_expression","latex_before","latex_after","explanation","scale","stiffness","damping","final_answer","x","solution_steps","steps","length","onClick","whileHover","whileTap","height","exit","duration","slice","color","fontSize","marginTop","fontStyle","_c14","$RefreshReg$"],"sources":["/Users/sorour/Documents/GitHub/library-management-system (1)/Logikos/mathviz-frontend/src/components/SolutionDisplay.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport styled from \"styled-components\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport \"katex/dist/katex.min.css\";\nimport { InlineMath, BlockMath } from \"react-katex\";\nimport { MathSolution, MathStep, LegacyStep } from \"../types/mathviz\";\n\nconst SolutionContainer = styled(motion.div)`\n  background: linear-gradient(135deg, rgba(255,255,255,0.95), rgba(255,255,255,0.90));\n  border-radius: 16px;\n  padding: 1.5rem;\n  margin: 1rem 0;\n  border: 1px solid rgba(255, 255, 255, 0.2);\n  box-shadow: 0 8px 32px rgba(3, 8, 20, 0.3);\n  backdrop-filter: blur(10px);\n`;\n\nconst FinalAnswer = styled(motion.div)`\n  background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n  color: white;\n  padding: 1rem 1.5rem;\n  border-radius: 12px;\n  margin-bottom: 1.5rem;\n  font-weight: 600;\n  font-size: 1.1rem;\n  box-shadow: 0 8px 24px rgba(16, 185, 129, 0.3);\n  display: flex;\n  align-items: center;\n\n  &::before {\n    content: \"\";\n  }\n`;\n\nconst StepsHeader = styled.div`\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  margin-bottom: 1rem;\n  cursor: pointer;\n  padding: 0.5rem;\n  border-radius: 8px;\n  transition: background-color 0.2s ease;\n\n  &:hover {\n    background: rgba(0, 0, 0, 0.02);\n  }\n`;\n\nconst StepsTitle = styled.h3`\n  font-weight: 700;\n  font-size: 1rem;\n  color: #1f2937;\n  margin: 0;\n  display: flex;\n  align-items: center;\n`;\n\nconst ExpandButton = styled(motion.button)<{ isExpanded: boolean }>`\n  background: none;\n  border: none;\n  color: #6366f1;\n  font-weight: 600;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  gap: 0.5rem;\n  font-size: 0.9rem;\n\n  &::after {\n    content: \"${(props) => (props.isExpanded ? \"â–²\" : \"â–¼\")}\";\n    transition: transform 0.2s ease;\n  }\n`;\n\nconst StepsContainer = styled(motion.div)`\n  overflow: hidden;\n`;\n\nconst StepCard = styled(motion.div)`\n  background: white;\n  border: 1px solid rgba(0, 0, 0, 0.08);\n  border-radius: 12px;\n  padding: 1rem;\n  margin-bottom: 0.75rem;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.04);\n  transition: all 0.2s ease;\n\n  &:hover {\n    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.08);\n    transform: translateY(-1px);\n  }\n\n  &:last-child {\n    margin-bottom: 0;\n  }\n`;\n\nconst StepTitle = styled.div`\n  font-weight: 600;\n  color: #1f2937;\n  font-size: 0.95rem;\n  margin-bottom: 0.5rem;\n  display: flex;\n  align-items: center;\n\n  &::before {\n    content: counter(step-counter);\n    counter-increment: step-counter;\n    background: #6366f1;\n    color: white;\n    width: 24px;\n    height: 24px;\n    border-radius: 50%;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    font-size: 0.8rem;\n    font-weight: 600;\n    margin-right: 0.75rem;\n    flex-shrink: 0;\n  }\n`;\n\nconst RuleFormula = styled.div`\n  background: #eff6ff;\n  color: #1e40af;\n  padding: 0.5rem 0.75rem;\n  border-radius: 8px;\n  font-size: 0.85rem;\n  font-family: \"JetBrains Mono\", monospace;\n  margin: 0.5rem 0;\n  border-left: 3px solid #3b82f6;\n`;\n\nconst MathTransformation = styled.div`\n  background: #f3f4f6;\n  padding: 0.75rem;\n  border-radius: 10px;\n  font-family: \"JetBrains Mono\", monospace;\n  font-size: 0.9rem;\n  margin: 0.5rem 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  gap: 1rem;\n  flex-wrap: wrap;\n`;\n\nconst MathExpression = styled.div`\n  display: flex;\n  align-items: center;\n  padding: 0.5rem;\n  background: white;\n  border-radius: 6px;\n  border: 1px solid rgba(0, 0, 0, 0.05);\n`;\n\nconst Arrow = styled.div`\n  color: #6366f1;\n  font-weight: bold;\n  font-size: 1.2rem;\n`;\n\nconst StepExplanation = styled.div`\n  color: #6b7280;\n  font-size: 0.85rem;\n  line-height: 1.4;\n  font-style: italic;\n  margin-top: 0.5rem;\n  padding: 0.5rem;\n  background: rgba(107, 114, 128, 0.05);\n  border-radius: 6px;\n`;\n\nconst StepCounter = styled.div`\n  counter-reset: step-counter;\n`;\n\ninterface SolutionDisplayProps {\n  solution: MathSolution;\n}\n\nconst isLegacyStep = (step: MathStep | LegacyStep): step is LegacyStep => {\n  return \"step_id\" in step && \"description\" in step;\n};\n\nconst formatMathExpression = (expr: string): string => {\n  if (!expr) return \"\";\n\n  // Convert common math notation to LaTeX\n  return expr\n    .replace(/\\^(\\d+)/g, \"^{$1}\")\n    .replace(/\\^([a-zA-Z]+)/g, \"^{$1}\")\n    .replace(/sqrt\\(([^)]+)\\)/g, \"\\\\sqrt{$1}\")\n    .replace(/\\bpi\\b/g, \"\\\\pi\")\n    .replace(/\\binfinity\\b/g, \"\\\\infty\")\n    .replace(/\\*/g, \"\\\\cdot\")\n    .replace(/\\+-/g, \"\\\\pm\");\n};\n\nconst SafeMath: React.FC<{ children: string; block?: boolean }> = ({\n  children,\n  block = false,\n}) => {\n  try {\n    const formatted = formatMathExpression(children);\n    return block ? (\n      <BlockMath>{formatted}</BlockMath>\n    ) : (\n      <InlineMath>{formatted}</InlineMath>\n    );\n  } catch (error) {\n    // Fallback to plain text if LaTeX parsing fails\n    return (\n      <code style={{ fontFamily: \"JetBrains Mono, monospace\" }}>\n        {children}\n      </code>\n    );\n  }\n};\n\nexport const SolutionDisplay: React.FC<SolutionDisplayProps> = ({\n  solution,\n}) => {\n  const [isExpanded, setIsExpanded] = useState(true);\n\n  const formatFinalAnswer = (answer: any): string => {\n    if (typeof answer === \"object\" && answer !== null) {\n      if (answer.solutions) {\n        return `x = ${JSON.stringify(answer.solutions)}`;\n      } else if (answer.derivative) {\n        return `f'(x) = ${answer.derivative}`;\n      } else if (answer.integral) {\n        return `âˆ«f(x)dx = ${answer.integral} + C`;\n      } else if (answer.type === \"derivative\") {\n        return `f'(x) = ${answer.derivative || \"N/A\"}`;\n      } else if (answer.type === \"algebraic_solution\" && answer.solutions) {\n        const solutions = answer.solutions;\n        return Object.entries(solutions)\n          .map(([k, v]) => `${k} = ${v}`)\n          .join(\", \");\n      }\n      return JSON.stringify(answer);\n    }\n    return String(answer);\n  };\n\n  // Render HTML visualization if present (e.g., contour map, plotly, gnuplot)\n  const renderVisualization = () => {\n    // First check for direct visualization HTML (contour maps, etc.)\n    if (\n      solution.visualization &&\n      typeof solution.visualization === \"string\" &&\n      solution.visualization.includes(\"<\")\n    ) {\n      console.log(\"ðŸŽ¨ Rendering direct visualization HTML\");\n      return (\n        <div style={{ margin: \"2rem 0\", textAlign: \"center\", maxWidth: \"100%\", overflow: \"auto\" }}>\n          <div dangerouslySetInnerHTML={{ __html: solution.visualization }} />\n        </div>\n      );\n    }\n\n    // Check for graph_html in metadata from mathviz pipeline\n    const meta = solution.metadata as any;\n    if (meta && meta.graph_html && typeof meta.graph_html === \"string\") {\n      console.log(\"ðŸŽ¨ Rendering graph_html from metadata\");\n      return (\n        <div style={{ margin: \"2rem 0\", textAlign: \"center\", maxWidth: \"100%\", overflow: \"auto\" }}>\n          <div dangerouslySetInnerHTML={{ __html: meta.graph_html }} />\n        </div>\n      );\n    }\n\n    // Legacy support for interactive_visualization structure\n    if (\n      meta &&\n      meta.interactive_visualization &&\n      meta.interactive_visualization.has_html\n    ) {\n      const html = meta.interactive_visualization.graph_html;\n      if (html) {\n        console.log(\"ðŸŽ¨ Rendering legacy interactive_visualization HTML\");\n        return (\n          <div style={{ margin: \"2rem 0\", textAlign: \"center\", maxWidth: \"100%\", overflow: \"auto\" }}>\n            <div dangerouslySetInnerHTML={{ __html: html }} />\n          </div>\n        );\n      }\n    }\n\n    return null;\n  };\n\n  const renderStep = (step: MathStep | LegacyStep, index: number) => {\n    if (isLegacyStep(step)) {\n      // Handle new detailed format\n      const operation = step.operation\n        .replace(/_/g, \" \")\n        .replace(/\\b\\w/g, (l) => l.toUpperCase());\n      const description = step.reasoning || step.description;\n      const ruleFormula = step.rule_formula;\n\n      const beforeExpr = step.input_state?.expression || \"\";\n      const afterExpr = step.output_state?.expression || \"\";\n\n      return (\n        <StepCard\n          key={step.step_id}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: index * 0.1 }}\n        >\n          <StepTitle>{operation}</StepTitle>\n\n          {ruleFormula && (\n            <RuleFormula>\n              <SafeMath>{ruleFormula}</SafeMath>\n            </RuleFormula>\n          )}\n\n          {beforeExpr && afterExpr && beforeExpr !== afterExpr && (\n            <MathTransformation>\n              <MathExpression>\n                <SafeMath>{beforeExpr}</SafeMath>\n              </MathExpression>\n              <Arrow>â†’</Arrow>\n              <MathExpression>\n                <SafeMath>{afterExpr}</SafeMath>\n              </MathExpression>\n            </MathTransformation>\n          )}\n\n          <StepExplanation>{description}</StepExplanation>\n        </StepCard>\n      );\n    } else {\n      // Handle legacy format\n      return (\n        <StepCard\n          key={index}\n          initial={{ opacity: 0, y: 10 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: index * 0.1 }}\n        >\n          <StepTitle>{step.rule_name}</StepTitle>\n\n          {step.rule_formula && (\n            <RuleFormula>\n              <SafeMath>{step.rule_formula}</SafeMath>\n            </RuleFormula>\n          )}\n\n          {step.before_expression && step.after_expression && (\n            <MathTransformation>\n              <MathExpression>\n                {step.latex_before ? (\n                  <SafeMath>{step.latex_before}</SafeMath>\n                ) : (\n                  <SafeMath>{step.before_expression}</SafeMath>\n                )}\n              </MathExpression>\n              <Arrow>â†’</Arrow>\n              <MathExpression>\n                {step.latex_after ? (\n                  <SafeMath>{step.latex_after}</SafeMath>\n                ) : (\n                  <SafeMath>{step.after_expression}</SafeMath>\n                )}\n              </MathExpression>\n            </MathTransformation>\n          )}\n\n          <StepExplanation>{step.explanation}</StepExplanation>\n        </StepCard>\n      );\n    }\n  };\n\n  return (\n    <SolutionContainer\n      initial={{ opacity: 0, scale: 0.95 }}\n      animate={{ opacity: 1, scale: 1 }}\n      transition={{\n        type: \"spring\",\n        stiffness: 300,\n        damping: 30,\n      }}\n    >\n      {/* Final Answer */}\n      {solution.final_answer && (\n        <FinalAnswer\n          initial={{ opacity: 0, x: -20 }}\n          animate={{ opacity: 1, x: 0 }}\n          transition={{ delay: 0.2 }}\n        >\n          <SafeMath>{formatFinalAnswer(solution.final_answer)}</SafeMath>\n        </FinalAnswer>\n      )}\n\n      {/* Visualization (contour map, plot, etc.) */}\n      {renderVisualization()}\n\n      {/* Solution Steps */}\n      {(solution.solution_steps || (solution as any).steps) &&\n        (solution.solution_steps || (solution as any).steps).length > 0 && (\n          <div>\n            <StepsHeader onClick={() => setIsExpanded(!isExpanded)}>\n              <StepsTitle>\n                Step-by-Step Solution (\n                {(solution.solution_steps || (solution as any).steps).length}{\" \"}\n                steps)\n              </StepsTitle>\n              <ExpandButton\n                isExpanded={isExpanded}\n                whileHover={{ scale: 1.05 }}\n                whileTap={{ scale: 0.95 }}\n              >\n                {isExpanded ? \"Hide steps\" : \"Show steps\"}\n              </ExpandButton>\n            </StepsHeader>\n\n            <AnimatePresence>\n              {isExpanded && (\n                <StepsContainer\n                  initial={{ opacity: 0, height: 0 }}\n                  animate={{ opacity: 1, height: \"auto\" }}\n                  exit={{ opacity: 0, height: 0 }}\n                  transition={{ duration: 0.3 }}\n                >\n                  <StepCounter>\n                    {(solution.solution_steps || (solution as any).steps)\n                      .slice(0, 10)\n                      .map((step: any, index: number) =>\n                        renderStep(step, index)\n                      )}\n\n                    {(solution.solution_steps || (solution as any).steps)\n                      .length > 10 && (\n                      <div\n                        style={{\n                          textAlign: \"center\",\n                          color: \"#6b7280\",\n                          fontSize: \"0.85rem\",\n                          marginTop: \"1rem\",\n                          fontStyle: \"italic\",\n                        }}\n                      >\n                        +{\" \"}\n                        {(solution.solution_steps || (solution as any).steps)\n                          .length - 10}{\" \"}\n                        more steps available\n                      </div>\n                    )}\n                  </StepCounter>\n                </StepsContainer>\n              )}\n            </AnimatePresence>\n          </div>\n        )}\n    </SolutionContainer>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}