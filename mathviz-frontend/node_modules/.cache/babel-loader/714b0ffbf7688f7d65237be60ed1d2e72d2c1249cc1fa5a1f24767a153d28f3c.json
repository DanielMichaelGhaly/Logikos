{"ast":null,"code":"var _jsxFileName = \"/Users/sorour/workspace/Logikos/mathviz-frontend/src/components/DesmosGraph.tsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { motion } from 'framer-motion';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst GraphContainer = styled(motion.div)`\n  margin: 1.5rem 0;\n  background: white;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(0, 0, 0, 0.05);\n`;\n_c = GraphContainer;\nconst GraphHeader = styled.div`\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 1rem 1.5rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  \n  &::before {\n    content: \"ðŸ“Š\";\n    margin-right: 0.75rem;\n    font-size: 1.1rem;\n  }\n`;\n_c2 = GraphHeader;\nconst GraphCanvas = styled.div`\n  width: 100%;\n  height: 400px;\n  display: block;\n`;\n_c3 = GraphCanvas;\nconst ErrorMessage = styled.div`\n  padding: 2rem;\n  text-align: center;\n  color: #6b7280;\n  font-style: italic;\n`;\n_c4 = ErrorMessage;\n// Desmos is loaded from https://www.desmos.com/api/v1.8/calculator.js via index.html or dynamically if needed\n\nexport const DesmosGraph = ({\n  url,\n  expressions,\n  viewport\n}) => {\n  _s();\n  const elRef = useRef(null);\n  const calculatorRef = useRef(null);\n  useEffect(() => {\n    const hasExpressions = expressions && expressions.length > 0;\n    if (!hasExpressions || !elRef.current) return;\n\n    // Ensure Desmos is available\n    const ensureDesmos = async () => {\n      if (window.Desmos) return window.Desmos;\n      await new Promise((resolve, reject) => {\n        const s = document.createElement('script');\n        s.src = 'https://www.desmos.com/api/v1.8/calculator.js?apiKey=desa';\n        s.async = true;\n        s.onload = () => resolve();\n        s.onerror = () => reject(new Error('Failed to load Desmos API'));\n        document.body.appendChild(s);\n      });\n      return window.Desmos;\n    };\n    let disposed = false;\n    ensureDesmos().then(Desmos => {\n      if (disposed || !elRef.current) return;\n      calculatorRef.current = Desmos.GraphingCalculator(elRef.current, {\n        expressions: true,\n        settingsMenu: false,\n        zoomButtons: true,\n        expressionsCollapsed: false\n      });\n\n      // Set expressions\n      expressions.forEach(expr => {\n        try {\n          calculatorRef.current.setExpression({\n            id: String(Math.random()),\n            latex: expr\n          });\n        } catch {\n          // ignore invalid expression\n        }\n      });\n\n      // Set viewport if provided\n      if (viewport) {\n        const {\n          xmin,\n          xmax,\n          ymin,\n          ymax\n        } = viewport;\n        if ([xmin, xmax, ymin, ymax].some(v => typeof v === 'number')) {\n          calculatorRef.current.setMathBounds({\n            left: xmin !== null && xmin !== void 0 ? xmin : -10,\n            right: xmax !== null && xmax !== void 0 ? xmax : 10,\n            bottom: ymin !== null && ymin !== void 0 ? ymin : -10,\n            top: ymax !== null && ymax !== void 0 ? ymax : 10\n          });\n        }\n      }\n    }).catch(() => {});\n    return () => {\n      disposed = true;\n      if (calculatorRef.current) {\n        try {\n          calculatorRef.current.destroy();\n        } catch {}\n        calculatorRef.current = null;\n      }\n    };\n  }, [expressions, viewport]);\n\n  // If config is provided, render canvas; otherwise if URL given, show iframe fallback\n  if (expressions && expressions.length > 0) {\n    return /*#__PURE__*/_jsxDEV(GraphContainer, {\n      initial: {\n        opacity: 0,\n        scale: 0.95\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        duration: 0.5\n      },\n      children: [/*#__PURE__*/_jsxDEV(GraphHeader, {\n        children: \"Interactive Graph\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(GraphCanvas, {\n        ref: elRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 7\n    }, this);\n  }\n  if (url) {\n    return /*#__PURE__*/_jsxDEV(GraphContainer, {\n      initial: {\n        opacity: 0,\n        scale: 0.95\n      },\n      animate: {\n        opacity: 1,\n        scale: 1\n      },\n      transition: {\n        duration: 0.5\n      },\n      children: [/*#__PURE__*/_jsxDEV(GraphHeader, {\n        children: \"Interactive Graph\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 129,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"iframe\", {\n        src: url,\n        title: \"Interactive Mathematical Graph\",\n        style: {\n          width: '100%',\n          height: 400,\n          border: 'none',\n          display: 'block'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(GraphContainer, {\n    initial: {\n      opacity: 0,\n      scale: 0.95\n    },\n    animate: {\n      opacity: 1,\n      scale: 1\n    },\n    transition: {\n      duration: 0.5\n    },\n    children: [/*#__PURE__*/_jsxDEV(GraphHeader, {\n      children: \"Interactive Graph\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ErrorMessage, {\n      children: \"Graph visualization not available for this problem.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 136,\n    columnNumber: 5\n  }, this);\n};\n_s(DesmosGraph, \"kCVvGvxVsIr7EnSAKSj11WKDsro=\");\n_c5 = DesmosGraph;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"GraphContainer\");\n$RefreshReg$(_c2, \"GraphHeader\");\n$RefreshReg$(_c3, \"GraphCanvas\");\n$RefreshReg$(_c4, \"ErrorMessage\");\n$RefreshReg$(_c5, \"DesmosGraph\");","map":{"version":3,"names":["React","useEffect","useRef","styled","motion","jsxDEV","_jsxDEV","GraphContainer","div","_c","GraphHeader","_c2","GraphCanvas","_c3","ErrorMessage","_c4","DesmosGraph","url","expressions","viewport","_s","elRef","calculatorRef","hasExpressions","length","current","ensureDesmos","window","Desmos","Promise","resolve","reject","s","document","createElement","src","async","onload","onerror","Error","body","appendChild","disposed","then","GraphingCalculator","settingsMenu","zoomButtons","expressionsCollapsed","forEach","expr","setExpression","id","String","Math","random","latex","xmin","xmax","ymin","ymax","some","v","setMathBounds","left","right","bottom","top","catch","destroy","initial","opacity","scale","animate","transition","duration","children","fileName","_jsxFileName","lineNumber","columnNumber","ref","title","style","width","height","border","display","_c5","$RefreshReg$"],"sources":["/Users/sorour/workspace/Logikos/mathviz-frontend/src/components/DesmosGraph.tsx"],"sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport styled from 'styled-components';\nimport { motion } from 'framer-motion';\n\nconst GraphContainer = styled(motion.div)`\n  margin: 1.5rem 0;\n  background: white;\n  border-radius: 16px;\n  overflow: hidden;\n  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);\n  border: 1px solid rgba(0, 0, 0, 0.05);\n`;\n\nconst GraphHeader = styled.div`\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n  padding: 1rem 1.5rem;\n  font-weight: 600;\n  display: flex;\n  align-items: center;\n  \n  &::before {\n    content: \"ðŸ“Š\";\n    margin-right: 0.75rem;\n    font-size: 1.1rem;\n  }\n`;\n\nconst GraphCanvas = styled.div`\n  width: 100%;\n  height: 400px;\n  display: block;\n`;\n\nconst ErrorMessage = styled.div`\n  padding: 2rem;\n  text-align: center;\n  color: #6b7280;\n  font-style: italic;\n`;\n\ninterface DesmosGraphProps {\n  url?: string; // optional iframe fallback\n  expressions?: string[];\n  viewport?: { xmin?: number; xmax?: number; ymin?: number; ymax?: number };\n}\n\n// Desmos is loaded from https://www.desmos.com/api/v1.8/calculator.js via index.html or dynamically if needed\n\nexport const DesmosGraph: React.FC<DesmosGraphProps> = ({ url, expressions, viewport }) => {\n  const elRef = useRef<HTMLDivElement | null>(null);\n  const calculatorRef = useRef<any>(null);\n\n  useEffect(() => {\n    const hasExpressions = expressions && expressions.length > 0;\n    if (!hasExpressions || !elRef.current) return;\n\n    // Ensure Desmos is available\n    const ensureDesmos = async () => {\n      if ((window as any).Desmos) return (window as any).Desmos;\n      await new Promise<void>((resolve, reject) => {\n        const s = document.createElement('script');\n        s.src = 'https://www.desmos.com/api/v1.8/calculator.js?apiKey=desa';\n        s.async = true;\n        s.onload = () => resolve();\n        s.onerror = () => reject(new Error('Failed to load Desmos API'));\n        document.body.appendChild(s);\n      });\n      return (window as any).Desmos;\n    };\n\n    let disposed = false;\n    ensureDesmos()\n      .then((Desmos) => {\n        if (disposed || !elRef.current) return;\n        calculatorRef.current = Desmos.GraphingCalculator(elRef.current, {\n          expressions: true,\n          settingsMenu: false,\n          zoomButtons: true,\n          expressionsCollapsed: false,\n        });\n\n        // Set expressions\n        expressions!.forEach((expr) => {\n          try {\n            calculatorRef.current!.setExpression({ id: String(Math.random()), latex: expr });\n          } catch {\n            // ignore invalid expression\n          }\n        });\n\n        // Set viewport if provided\n        if (viewport) {\n          const { xmin, xmax, ymin, ymax } = viewport;\n          if ([xmin, xmax, ymin, ymax].some((v) => typeof v === 'number')) {\n            calculatorRef.current.setMathBounds({\n              left: xmin ?? -10,\n              right: xmax ?? 10,\n              bottom: ymin ?? -10,\n              top: ymax ?? 10,\n            });\n          }\n        }\n      })\n      .catch(() => {})\n\n    return () => {\n      disposed = true;\n      if (calculatorRef.current) {\n        try { calculatorRef.current.destroy(); } catch {}\n        calculatorRef.current = null;\n      }\n    };\n  }, [expressions, viewport]);\n\n  // If config is provided, render canvas; otherwise if URL given, show iframe fallback\n  if (expressions && expressions.length > 0) {\n    return (\n      <GraphContainer initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.5 }}>\n        <GraphHeader>Interactive Graph</GraphHeader>\n        <GraphCanvas ref={elRef} />\n      </GraphContainer>\n    );\n  }\n\n  if (url) {\n    return (\n      <GraphContainer initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.5 }}>\n        <GraphHeader>Interactive Graph</GraphHeader>\n        <iframe src={url} title=\"Interactive Mathematical Graph\" style={{ width: '100%', height: 400, border: 'none', display: 'block' }} />\n      </GraphContainer>\n    );\n  }\n\n  return (\n    <GraphContainer initial={{ opacity: 0, scale: 0.95 }} animate={{ opacity: 1, scale: 1 }} transition={{ duration: 0.5 }}>\n      <GraphHeader>Interactive Graph</GraphHeader>\n      <ErrorMessage>Graph visualization not available for this problem.</ErrorMessage>\n    </GraphContainer>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}